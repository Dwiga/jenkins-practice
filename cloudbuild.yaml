steps:
    - name: 'python'
      entrypoint: 'python'
      args: ['-m', 'pip', 'install', '--upgrade', 'pip']
    - name: python
      entrypoint: python
      args: ['-m', 'pip', 'install', '-r', 'requirements.txt', '--user']
    - name: python
      entrypoint: python
      args: ["-m", "pytest"]
    
    - name: 'gcr.io/cloud-builders/npm:node-20.16.0'
      entrypoint: npm
      args: ["install"]
    - name: 'gcr.io/cloud-builders/npm:node-20.16.0'
      entrypoint: npm
      args: ["run", "build"]

    - name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
      entrypoint: 'bash'
      args: ['-c', 'gcloud config set app/cloud_build_timeout 1600 && gcloud app deploy']
      timeout: '1600s'
options:
    logging: CLOUD_LOGGING_ONLY
